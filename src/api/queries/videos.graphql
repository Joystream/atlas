fragment VideoMediaMetadataFields on VideoMediaMetadata {
  id
  pixelHeight
  pixelWidth
}

fragment LicenseFields on License {
  id
  code
  attribution
  customText
}

fragment BasicVideoFields on Video {
  id
  title
  thumbnailPhotoUrls
  thumbnailPhotoAvailability
  thumbnailPhotoDataObject {
    ...DataObjectFields
  }
}

fragment VideoFields on Video {
  id
  title
  description
  category {
    id
  }
  views
  duration
  createdAt
  isPublic
  isExplicit
  isFeatured
  hasMarketing
  isCensored
  language {
    iso
  }
  publishedBeforeJoystream
  mediaMetadata {
    ...VideoMediaMetadataFields
  }
  mediaUrls
  mediaAvailability
  mediaDataObject {
    ...DataObjectFields
  }
  thumbnailPhotoUrls
  thumbnailPhotoAvailability
  thumbnailPhotoDataObject {
    ...DataObjectFields
  }
  channel {
    ...BasicChannelFields
  }
  license {
    ...LicenseFields
  }
}

query GetVideo($where: VideoWhereUniqueInput!) {
  videoByUniqueInput(where: $where) {
    ...VideoFields
  }
}

query GetVideosConnection(
  $first: Int
  $after: String
  $orderBy: VideoOrderByInput! = createdAt_DESC
  $where: VideoWhereInput
) {
  videosConnection(first: $first, after: $after, where: $where, orderBy: [$orderBy]) {
    edges {
      cursor
      node {
        ...VideoFields
      }
    }
    pageInfo {
      hasNextPage
      endCursor
    }
    totalCount
  }
}

query GetVideos($offset: Int, $limit: Int, $where: VideoWhereInput, $orderBy: VideoOrderByInput! = createdAt_DESC) {
  videos(offset: $offset, limit: $limit, where: $where, orderBy: [$orderBy]) {
    ...VideoFields
  }
}

query GetBasicVideos($where: VideoWhereInput) {
  videos(where: $where) {
    ...BasicVideoFields
  }
}

query GetMostViewedVideos($timePeriodDays: Int!, $limit: Int) {
  mostViewedVideos(timePeriodDays: $timePeriodDays, limit: $limit) {
    edges {
      cursor
      node {
        ...VideoFields
      }
    }
    pageInfo {
      hasNextPage
      endCursor
    }
    totalCount
  }
}

query GetMostViewedVideosAllTime($limit: Int!) {
  mostViewedVideosAllTime(limit: $limit) {
    edges {
      cursor
      node {
        ...VideoFields
      }
    }
    pageInfo {
      hasNextPage
      endCursor
    }
    totalCount
  }
}

mutation AddVideoView($videoId: ID!, $channelId: ID!, $categoryId: ID) {
  addVideoView(videoId: $videoId, channelId: $channelId, categoryId: $categoryId) {
    id
    views
  }
}
