fragment BasicChannelFields on Channel {
  id
  title
  createdAt

  avatarPhotoUrls
  avatarPhotoAvailability
  avatarPhotoDataObject {
    ...DataObjectFields
  }
}

fragment AllChannelFields on Channel {
  ...BasicChannelFields
  description
  follows
  views
  isPublic
  isCensored
  language {
    id
    iso
  }
  ownerMember {
    id
    handle
    avatarUri
  }
  coverPhotoUrls
  coverPhotoAvailability
  coverPhotoDataObject {
    ...DataObjectFields
  }
}

query GetBasicChannel($where: ChannelWhereUniqueInput!) {
  channelByUniqueInput(where: $where) {
    ...BasicChannelFields
  }
}

query GetChannel($where: ChannelWhereUniqueInput!) {
  channelByUniqueInput(where: $where) {
    ...AllChannelFields
  }
}

query GetVideoCount($where: VideoWhereInput) {
  videosConnection(first: 0, where: $where) {
    totalCount
  }
}

query GetChannels($where: ChannelWhereInput, $limit: Int = 50, $orderBy: [ChannelOrderByInput!] = [createdAt_DESC]) {
  channels(where: $where, orderBy: $orderBy, limit: $limit) {
    ...AllChannelFields
  }
}

query GetChannelsConnection(
  $first: Int
  $after: String
  $where: ChannelWhereInput
  $orderBy: [ChannelOrderByInput!] = [createdAt_DESC]
) {
  channelsConnection(first: $first, after: $after, where: $where, orderBy: $orderBy) {
    edges {
      cursor
      node {
        ...AllChannelFields
      }
    }
    pageInfo {
      hasNextPage
      endCursor
    }
    totalCount
  }
}

mutation FollowChannel($channelId: ID!) {
  followChannel(channelId: $channelId) {
    id
    follows
  }
}

mutation UnfollowChannel($channelId: ID!) {
  unfollowChannel(channelId: $channelId) {
    id
    follows
  }
}

query GetMostViewedChannels(
  $limit: Int
  $timePeriodDays: Int!
  $first: Int
  $after: String
  $where: MostViewedAndMostFollowedWhereInput
) {
  mostViewedChannels(limit: $limit, first: $first, after: $after, timePeriodDays: $timePeriodDays, where: $where) {
    edges {
      cursor
      node {
        ...AllChannelFields
      }
    }
    pageInfo {
      hasNextPage
      endCursor
    }
    totalCount
  }
}

query GetMostViewedChannelsAllTime(
  $limit: Int!
  $first: Int
  $after: String
  $where: MostViewedAndMostFollowedWhereInput
) {
  mostViewedChannelsAllTime(limit: $limit, first: $first, after: $after, where: $where) {
    edges {
      cursor
      node {
        ...AllChannelFields
      }
    }
    pageInfo {
      hasNextPage
      endCursor
    }
    totalCount
  }
}

query GetMostFollowedChannels(
  $limit: Int
  $timePeriodDays: Int!
  $first: Int
  $after: String
  $where: MostViewedAndMostFollowedWhereInput
) {
  mostFollowedChannels(limit: $limit, first: $first, after: $after, timePeriodDays: $timePeriodDays, where: $where) {
    edges {
      cursor
      node {
        ...AllChannelFields
      }
    }
    pageInfo {
      hasNextPage
      endCursor
    }
    totalCount
  }
}

query GetMostFollowedChannelsAllTime(
  $limit: Int!
  $first: Int
  $after: String
  $where: MostViewedAndMostFollowedWhereInput
) {
  mostFollowedChannelsAllTime(limit: $limit, first: $first, after: $after, where: $where) {
    edges {
      cursor
      node {
        ...AllChannelFields
      }
    }
    pageInfo {
      hasNextPage
      endCursor
    }
    totalCount
  }
}
