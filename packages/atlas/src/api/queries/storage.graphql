query GetDistributionBucketsWithBags {
  distributionBuckets(limit: 500, where: { distributing_eq: true }) {
    id
    bags {
      id
    }
    operators {
      ...DistributionBucketOperatorField
    }
  }
}

query GetStorageBucketsWithBags {
  storageBuckets(
    limit: 500
    where: {
      operatorStatus_json: { isTypeOf_eq: "StorageBucketOperatorStatusActive" }
      operatorMetadata: { nodeEndpoint_contains: "http" }
    }
  ) {
    id
    operatorMetadata {
      nodeEndpoint
      nodeLocation {
        coordinates {
          latitude
          longitude
        }
      }
    }
    bags {
      id
    }
  }
}

query GetBasicDistributionBuckets {
  distributionBuckets(limit: 500, where: { acceptingNewBags_eq: true }) {
    id
    bucketIndex
    family {
      id
    }
  }
}

query GetBasicStorageBuckets {
  storageBuckets(limit: 500, where: { acceptingNewBags_eq: true }) {
    id
  }
}

query GetDistributionBucketsByBagIds($bagIds: [ID!]) {
  storageBags(where: { id_in: $bagIds }) {
    id
    distributionBuckets {
      id
      operators {
        ...DistributionBucketOperatorField
      }
    }
  }
}
